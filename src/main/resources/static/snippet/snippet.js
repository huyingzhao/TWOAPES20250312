function getArrayObj()   {
    var arrayObj = [];
    arrayObj.push("<option value='1c'>1c</option>");
    arrayObj.push("<option value='abnf'>abnf</option>");
    arrayObj.push("<option value='accesslog'>accesslog</option>");
    arrayObj.push("<option value='actionscript'>actionscript</option>");
    arrayObj.push("<option value='ada'>ada</option>");
    arrayObj.push("<option value='angelscript'>angelscript</option>");
    arrayObj.push("<option value='apache'>apache</option>");
    arrayObj.push("<option value='applescript'>applescript</option>");
    arrayObj.push("<option value='arcade'>arcade</option>");
    arrayObj.push("<option value='arduino'>arduino</option>");
    arrayObj.push("<option value='armasm'>armasm</option>");
    arrayObj.push("<option value='asciidoc'>asciidoc</option>");
    arrayObj.push("<option value='aspectj'>aspectj</option>");
    arrayObj.push("<option value='autohotkey'>autohotkey</option>");
    arrayObj.push("<option value='autoit'>autoit</option>");
    arrayObj.push("<option value='avrasm'>avrasm</option>");
    arrayObj.push("<option value='awk'>awk</option>");
    arrayObj.push("<option value='axapta'>axapta</option>");
    arrayObj.push("<option value='bash'>bash</option>");
    arrayObj.push("<option value='basic'>basic</option>");
    arrayObj.push("<option value='bnf'>bnf</option>");
    arrayObj.push("<option value='brainfuck'>brainfuck</option>");
    arrayObj.push("<option value='cal'>cal</option>");
    arrayObj.push("<option value='capnproto'>capnproto</option>");
    arrayObj.push("<option value='ceylon'>ceylon</option>");
    arrayObj.push("<option value='clean'>clean</option>");
    arrayObj.push("<option value='clojure'>clojure</option>");
    arrayObj.push("<option value='clojure-repl'>clojure-repl</option>");
    arrayObj.push("<option value='cmake'>cmake</option>");
    arrayObj.push("<option value='coffeescript'>coffeescript</option>");
    arrayObj.push("<option value='coq'>coq</option>");
    arrayObj.push("<option value='cos'>cos</option>");
    arrayObj.push("<option value='cpp'>cpp</option>");
    arrayObj.push("<option value='crmsh'>crmsh</option>");
    arrayObj.push("<option value='crystal'>crystal</option>");
    arrayObj.push("<option value='csharp'>csharp</option>");
    arrayObj.push("<option value='csp'>csp</option>");
    arrayObj.push("<option value='css'>css</option>");
    arrayObj.push("<option value='d'>d</option>");
    arrayObj.push("<option value='dart'>dart</option>");
    arrayObj.push("<option value='delphi'>delphi</option>");
    arrayObj.push("<option value='diff'>diff</option>");
    arrayObj.push("<option value='django'>django</option>");
    arrayObj.push("<option value='dns'>dns</option>");
    arrayObj.push("<option value='dockerfile'>dockerfile</option>");
    arrayObj.push("<option value='dos'>dos</option>");
    arrayObj.push("<option value='dsconfig'>dsconfig</option>");
    arrayObj.push("<option value='dts'>dts</option>");
    arrayObj.push("<option value='dust'>dust</option>");
    arrayObj.push("<option value='ebnf'>ebnf</option>");
    arrayObj.push("<option value='elixir'>elixir</option>");
    arrayObj.push("<option value='elm'>elm</option>");
    arrayObj.push("<option value='erb'>erb</option>");
    arrayObj.push("<option value='erlang'>erlang</option>");
    arrayObj.push("<option value='erlang-repl'>erlang-repl</option>");
    arrayObj.push("<option value='excel'>excel</option>");
    arrayObj.push("<option value='fix'>fix</option>");
    arrayObj.push("<option value='flix'>flix</option>");
    arrayObj.push("<option value='fortran'>fortran</option>");
    arrayObj.push("<option value='fsharp'>fsharp</option>");
    arrayObj.push("<option value='gams'>gams</option>");
    arrayObj.push("<option value='gauss'>gauss</option>");
    arrayObj.push("<option value='gcode'>gcode</option>");
    arrayObj.push("<option value='gherkin'>gherkin</option>");
    arrayObj.push("<option value='glsl'>glsl</option>");
    arrayObj.push("<option value='gml'>gml</option>");
    arrayObj.push("<option value='go'>go</option>");
    arrayObj.push("<option value='golo'>golo</option>");
    arrayObj.push("<option value='gradle'>gradle</option>");
    arrayObj.push("<option value='graphql'>graphql</option>");
    arrayObj.push("<option value='groovy'>groovy</option>");
    arrayObj.push("<option value='haml'>haml</option>");
    arrayObj.push("<option value='handlebars'>handlebars</option>");
    arrayObj.push("<option value='haskell'>haskell</option>");
    arrayObj.push("<option value='haxe'>haxe</option>");
    arrayObj.push("<option value='hsp'>hsp</option>");
    arrayObj.push("<option value='http'>http</option>");
    arrayObj.push("<option value='hy'>hy</option>");
    arrayObj.push("<option value='inform7'>inform7</option>");
    arrayObj.push("<option value='ini'>ini</option>");
    arrayObj.push("<option value='irpf90'>irpf90</option>");
    arrayObj.push("<option value='isbl'>isbl</option>");
    arrayObj.push("<option value='java'>java</option>");
    arrayObj.push("<option value='javascript'>javascript</option>");
    arrayObj.push("<option value='jboss-cli'>jboss-cli</option>");
    arrayObj.push("<option value='json'>json</option>");
    arrayObj.push("<option value='julia'>julia</option>");
    arrayObj.push("<option value='julia-repl'>julia-repl</option>");
    arrayObj.push("<option value='kotlin'>kotlin</option>");
    arrayObj.push("<option value='lasso'>lasso</option>");
    arrayObj.push("<option value='latex'>latex</option>");
    arrayObj.push("<option value='ldif'>ldif</option>");
    arrayObj.push("<option value='leaf'>leaf</option>");
    arrayObj.push("<option value='less'>less</option>");
    arrayObj.push("<option value='lisp'>lisp</option>");
    arrayObj.push("<option value='livecodeserver'>livecodeserver</option>");
    arrayObj.push("<option value='livescript'>livescript</option>");
    arrayObj.push("<option value='llvm'>llvm</option>");
    arrayObj.push("<option value='lsl'>lsl</option>");
    arrayObj.push("<option value='lua'>lua</option>");
    arrayObj.push("<option value='makefile'>makefile</option>");
    arrayObj.push("<option value='markdown'>markdown</option>");
    arrayObj.push("<option value='mathematica'>mathematica</option>");
    arrayObj.push("<option value='matlab'>matlab</option>");
    arrayObj.push("<option value='maxima'>maxima</option>");
    arrayObj.push("<option value='mel'>mel</option>");
    arrayObj.push("<option value='mercury'>mercury</option>");
    arrayObj.push("<option value='mipsasm'>mipsasm</option>");
    arrayObj.push("<option value='mizar'>mizar</option>");
    arrayObj.push("<option value='mojolicious'>mojolicious</option>");
    arrayObj.push("<option value='monkey'>monkey</option>");
    arrayObj.push("<option value='moonscript'>moonscript</option>");
    arrayObj.push("<option value='n1ql'>n1ql</option>");
    arrayObj.push("<option value='nestedtext'>nestedtext</option>");
    arrayObj.push("<option value='nginx'>nginx</option>");
    arrayObj.push("<option value='nim'>nim</option>");
    arrayObj.push("<option value='nix'>nix</option>");
    arrayObj.push("<option value='node-repl'>node-repl</option>");
    arrayObj.push("<option value='nsis'>nsis</option>");
    arrayObj.push("<option value='objectivec'>objectivec</option>");
    arrayObj.push("<option value='ocaml'>ocaml</option>");
    arrayObj.push("<option value='openscad'>openscad</option>");
    arrayObj.push("<option value='oxygene'>oxygene</option>");
    arrayObj.push("<option value='parser3'>parser3</option>");
    arrayObj.push("<option value='perl'>perl</option>");
    arrayObj.push("<option value='pf'>pf</option>");
    arrayObj.push("<option value='pgsql'>pgsql</option>");
    arrayObj.push("<option value='php'>php</option>");
    arrayObj.push("<option value='php-template'>php-template</option>");
    arrayObj.push("<option value='pony'>pony</option>");
    arrayObj.push("<option value='powershell'>powershell</option>");
    arrayObj.push("<option value='processing'>processing</option>");
    arrayObj.push("<option value='profile'>profile</option>");
    arrayObj.push("<option value='prolog'>prolog</option>");
    arrayObj.push("<option value='properties'>properties</option>");
    arrayObj.push("<option value='protobuf'>protobuf</option>");
    arrayObj.push("<option value='puppet'>puppet</option>");
    arrayObj.push("<option value='purebasic'>purebasic</option>");
    arrayObj.push("<option value='python'>python</option>");
    arrayObj.push("<option value='python-repl'>python-repl</option>");
    arrayObj.push("<option value='q'>q</option>");
    arrayObj.push("<option value='qml'>qml</option>");
    arrayObj.push("<option value='r'>r</option>");
    arrayObj.push("<option value='reasonml'>reasonml</option>");
    arrayObj.push("<option value='rib'>rib</option>");
    arrayObj.push("<option value='roboconf'>roboconf</option>");
    arrayObj.push("<option value='routeros'>routeros</option>");
    arrayObj.push("<option value='rsl'>rsl</option>");
    arrayObj.push("<option value='ruby'>ruby</option>");
    arrayObj.push("<option value='ruleslanguage'>ruleslanguage</option>");
    arrayObj.push("<option value='rust'>rust</option>");
    arrayObj.push("<option value='sas'>sas</option>");
    arrayObj.push("<option value='scala'>scala</option>");
    arrayObj.push("<option value='scheme'>scheme</option>");
    arrayObj.push("<option value='scilab'>scilab</option>");
    arrayObj.push("<option value='scss'>scss</option>");
    arrayObj.push("<option value='shell'>shell</option>");
    arrayObj.push("<option value='smali'>smali</option>");
    arrayObj.push("<option value='smalltalk'>smalltalk</option>");
    arrayObj.push("<option value='sml'>sml</option>");
    arrayObj.push("<option value='sqf'>sqf</option>");
    arrayObj.push("<option value='sql'>sql</option>");
    arrayObj.push("<option value='stan'>stan</option>");
    arrayObj.push("<option value='stata'>stata</option>");
    arrayObj.push("<option value='step21'>step21</option>");
    arrayObj.push("<option value='stylus'>stylus</option>");
    arrayObj.push("<option value='subunit'>subunit</option>");
    arrayObj.push("<option value='swift'>swift</option>");
    arrayObj.push("<option value='taggerscript'>taggerscript</option>");
    arrayObj.push("<option value='tap'>tap</option>");
    arrayObj.push("<option value='tcl'>tcl</option>");
    arrayObj.push("<option value='thrift'>thrift</option>");
    arrayObj.push("<option value='tp'>tp</option>");
    arrayObj.push("<option value='twig'>twig</option>");
    arrayObj.push("<option value='typescript'>typescript</option>");
    arrayObj.push("<option value='vala'>vala</option>");
    arrayObj.push("<option value='vbnet'>vbnet</option>");
    arrayObj.push("<option value='vbscript'>vbscript</option>");
    arrayObj.push("<option value='vbscript-html'>vbscript-html</option>");
    arrayObj.push("<option value='verilog'>verilog</option>");
    arrayObj.push("<option value='vhdl'>vhdl</option>");
    arrayObj.push("<option value='vim'>vim</option>");
    arrayObj.push("<option value='wasm'>wasm</option>");
    arrayObj.push("<option value='wren'>wren</option>");
    arrayObj.push("<option value='x86asm'>x86asm</option>");
    arrayObj.push("<option value='xl'>xl</option>");
    arrayObj.push("<option value='xml'>xml</option>");
    arrayObj.push("<option value='xquery'>xquery</option>");
    arrayObj.push("<option value='yaml'>yaml</option>");
    arrayObj.push("<option value='zephir'>zephir</option>");
    return arrayObj;
}


function handleDetailOperations(id) {
    var num1 = Number(id);
    $.ajax({
        type: "post",
        url: "/snippet/getId",
        data: JSON.stringify({"id": num1}),
        dataType: "json",
        contentType: "application/json",
        success: function (result) {
            if (result.state === MESSAGE.SUCCESS) {
                var row = result.data;
                // Common field population logic
                ["", "edit", "detail"].forEach(function(prefix) {
                    $("#" + prefix + "IdValue").val(row.id);
                    $("#" + prefix + "TitleValue").val(row.title);
                    $("#" + prefix + "TypeValue").val(row.type);
                    $("#" + prefix + "PsValue").val(row.ps);
                    $("#" + prefix + "DataValue").val(row.data);
                    $("#" + prefix + "StateValue").val(row.state);
                });

                $("#editMouldValue").selectpicker('val', row.mould);
                $("#identification").val(row.identification);
                detailRow(row);
            }
        }
    });
}

function detailRow(row) {
    $("#detailTitleValue").text(row.title);
    $("#detailTypeValue").text(row.type);

    var ps = $("#detailPsValue");
    ps.text("");

    if (row.ps !== null && row.ps.length > 0) {
        ps.text("ps:"+row.ps);
    }

    document.getElementById('detailDataValue').innerHTML = marked.parse(row.data);


    // Configure Marked with Highlight.js
    marked.use({
        highlight: function(code, lang) {
            const language = hljs.getLanguage(lang) ? lang : 'plaintext';
            return hljs.highlight(code, { language }).value;
        },
        langPrefix: 'hljs language-'
    });
    // Add this after marked configuration
    hljs.configure({
        cssSelector: 'pre code',
        ignoreUnescapedHTML: true
    });

    addCodeCopyButtons(); // Add this after rendering
    // Add this at the end to initialize highlighting
    document.querySelectorAll('pre code').forEach((el) => {
        hljs.highlightElement(el);
    });
}

// Add copy function for code blocks
function addCodeCopyButtons() {
    $('pre').each(function(index) {
        const $pre = $(this);
        const $codeBlock = $pre.find('code');
        const uniqueId = `code-${Date.now()}-${index}`;
        
        // Create wrapper and button using jQuery
        const $wrapper = $('<div>').addClass('code-wrapper');
        const $button = $('<button>')
            .addClass('copy-button')
            .html('📋 复制')
            .attr('data-clipboard-target', `#${uniqueId}`);
        
        // Set code block ID
        $codeBlock.attr('id', uniqueId);
        
        // Initialize ClipboardJS with jQuery element
        const clipboard = new ClipboardJS($button[0]);
        
        clipboard.on('success', (e) => {
            layer.msg("复制成功");
            e.clearSelection();
        });

        clipboard.on('error', async (e) => {
            try {
                await navigator.clipboard.writeText($codeBlock.text());
                layer.msg("复制成功");
            } catch (err) {
                window.prompt("复制失败，请手动选择文本后按 Ctrl+C 复制", $codeBlock.text());
            }
        });

        // Reorganize DOM using jQuery methods
        $pre.wrap($wrapper).parent().append($button);
    });
}